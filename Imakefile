XCOMM Imakefile / Makefile for Blackbox - an X11 Window manager
XCOMM Copyright (c) 1997, 1998 by Brad Hughes, bhughes@arn.net
XCOMM
XCOMM  This program is free software; you can redistribute it and/or modify
XCOMM  it under the terms of the GNU General Public License as published by
XCOMM  the Free Software Foundation; either version 2 of the License, or
XCOMM  (at your option) any later version.
XCOMM
XCOMM  This program is distributed in the hope that it will be useful,
XCOMM  but WITHOUT ANY WARRANTY; without even the implied warranty of
XCOMM  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
XCOMM  GNU General Public License for more details.
XCOMM
XCOMM  You should have received a copy of the GNU General Public License
XCOMM  along with this program; if not, write to the Free Software
XCOMM  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
XCOMM
XCOMM (See the included file COPYING / GPL-2.0)

XCOMM Add compiler options here
CompileOptimize :=	$(CXXFLAGS) -g
CompileOptions :=	-Wall -W $(CompileOptimize)

XCOMM Define this to get XShapeExtention support
#define SupportShapeExtension

XCOMM Define this to get animations and other superfluous goodies
#define Animations

XCOMM Define this to get wire frame moves (as opposed to opaque moves)
XCOMM   Opaque moves == moves where window contents are always viewable
XCOMM #define WireFrameWindowMove

XCOMM
XCOMM  END OF USER CONFIGURABLE ITEMS
XCOMM
XCOMM  %%% *** %%% *** Do not edit the lines below *** %%% *** %%%
XCOMM
XCOMM

XCOMM Source files from which blackbox is built

Includes :=		blackbox.hh graphics.hh icon.hh llist.hh menu.hh session.hh window.hh workspace.hh
Sources :=		blackbox.cc graphics.cc icon.cc llist.cc main.cc menu.cc session.cc sessionmenu.cc window.cc windowmenu.cc workspace.cc workspacemenu.cc
Objects :=		blackbox.o graphics.o icon.o main.o menu.o llist.o session.o sessionmenu.o window.o windowmenu.o workspace.o workspacemenu.o

DefaultsPath :=		-DXAPPLOADDIR=\"$(XAPPLOADDIR)\" -DXLIBDIR=\"$(LIBDIR)\"
Libraries :=		$(XLIB) $(EXTENSIONLIB)
OtherLibs :=		

#ifdef SupportShapeExtension
CompileOptions :=	$(CompileOptions) -DSHAPE
#endif

#ifdef Animations
CompileOptions :=	$(CompileOptions) -DANIMATIONS
#endif

#ifdef WireFrameWindowMove
CompileOptions :=	$(CompileOptions) -DWIREMOVE
#endif

PROGRAMS := blackbox
SRCS1 := $(Sources)
OBJS1 := $(Objects)
ComplexProgramTarget_1(blackbox, $(Libraries), $(OtherLibs))

.cc.o: $(Sources)
	$(CXX) $(CompileOptions) -c -o $@ $<

session.o: session.cc
	$(CXX) $(CompileOptions) $(DefaultsPath) -c -o $@ $<

depend::
	rm -f Makefile.bak

install:: install.app-defaults
install.app-defaults::
	@if [ ! -d $(XAPPLOADDIR) ]; then \
		$(MKDIRHIER) $(XAPPLOADDIR); \
	fi
	$(INSTALL) $(INSTALLFLAGS) $(INSTMANFLAGS) Blackbox.ad $(XAPPLOADDIR)/Blackbox.ad
	$(INSTALL) $(INSTALLFLAGS) $(INSTMANFLAGS) Menu.ad $(LIBDIR)/BlackboxMenu.ad

XCOMM Make rules I enjoy

distclean::
	make clean
	rm -f Makefile

new::
	make clean
	make all

dist::
	make distclean
	xmkmf -a
	make all
