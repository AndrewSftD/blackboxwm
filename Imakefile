XCOMM Imakefile / Makefile for Blackbox - an X11 Window manager
XCOMM Copyright (c) 1997, 1998 by Brad Hughes, bhughes@arn.net
XCOMM
XCOMM  This program is free software; you can redistribute it and/or modify
XCOMM  it under the terms of the GNU General Public License as published by
XCOMM  the Free Software Foundation; either version 2 of the License, or
XCOMM  (at your option) any later version.
XCOMM
XCOMM  This program is distributed in the hope that it will be useful,
XCOMM  but WITHOUT ANY WARRANTY; without even the implied warranty of
XCOMM  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
XCOMM  GNU General Public License for more details.
XCOMM
XCOMM  You should have received a copy of the GNU General Public License
XCOMM  along with this program; if not, write to the Free Software
XCOMM  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
XCOMM
XCOMM (See the included file COPYING / GPL-2.0)

XCOMM Source files from which blackbox is built

Includes =		blackbox.hh graphics.hh icon.hh llist.hh menu.hh session.hh window.hh workspace.hh
Sources =		blackbox.cc graphics.cc icon.cc llist.cc main.cc menu.cc session.cc sessionmenu.cc window.cc windowmenu.cc workspace.cc workspacemenu.cc
Objects =		blackbox.o graphics.o icon.o main.o menu.o llist.o session.o sessionmenu.o window.o windowmenu.o workspace.o workspacemenu.o

XCOMM Add the name of a directory to search for includes (/include is appended)
XPROJECTROOT =		/usr/local

XCOMM Uncomment this line for debugging
XCOMM CXXFLAGS =		-g -O2 -I$(INCDIR)
XCOMM Add compiler options here
CompileOptions =	-Wall -W -DSHAPE -pipe $(CXXFLAGS)

DefaultsPath =		-DXAPPLOADDIR=\"$(XAPPLOADDIR)\" -DXLIBDIR=\"$(LIBDIR)\"
Libraries =		$(XLIB) $(EXTENSIONLIB)

PROGRAMS = blackbox
SRCS1 = $(Sources)
OBJS1 = $(Objects)
ComplexProgramTarget_1(blackbox, $(Libraries), $(OtherLibs))

.cc.o: $(Sources)
	$(CXX) $(CompileOptions) -c -o $@ $<

session.o: session.cc
	$(CXX) $(CompileOptions) $(DefaultsPath) -c -o $@ $<

XCOMM  %%% *** %%% *** Do not edit the lines below *** %%% *** %%%

depend:: 
	rm -f Makefile.bak

install:: install.app-defaults
install.app-defaults::
	@if [ ! -d $(XAPPLOADDIR) ]; then \
		$(MKDIRHIER) $(XAPPLOADDIR); \
	fi
	$(INSTALL) $(INSTALLFLAGS) $(INSTMANFLAGS) Blackbox.ad $(XAPPLOADDIR)/Blackbox.ad
	@if [ ! -d $(LIBDIR)/Blackbox ]; then \
		$(MKDIRHIER) $(LIBDIR)/Blackbox; \
	fi
	$(INSTALL) $(INSTALLFLAGS) $(INSTMANFLAGS) Menu.ad $(LIBDIR)/Blackbox/Menu.ad

XCOMM Make rules I enjoy

distclean::
	make clean
	rm -f Makefile

new:: 
	make clean
	make all

dist::
	make distclean
	xmkmf -a
	make all
